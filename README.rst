Diameter synthesis code, wori in progress
